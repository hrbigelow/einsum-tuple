# Specification of Einsum Tuple language

The Einsum Tuple language consists of tensor assignment statements.  Unlike
ordinary tensors, Eintup tensors are indexed by Einsum Tuples, or 'eintups'.
An eintup represents a collection of Einstein indices in a specific order
whereever it appears.  For example, the tensor expression `params[batch,slice]`
is indexed by eintups `batch` and `slice`, in that order.  At compile time,
eintups don't have a rank or dimensions.  At execution time, they are
initialized with dimensions generated by the runtime system, and can be read
using the expressions `DIMS(batch)` and `RANK(batch)`.

All binary operations, including assignment, perform automatic broadcasting of
eintups that are present in just one operand.  For example, the expression


```
outer[batch,row,col] = vec1[batch,row] * vec2[batch,col]
``` 

automatically broadcasts `vec1` across eintup `col` and `vec2` across `row`.
Special to assignment, eintups which exclusively appear on the right of an
assignment will be marginalized out:

```
# day is marginalized out
monthly_totals[batch,month] = daily[batch,month,day]
```

Eintups appearing exclusively on the left of an assignment cause the right side
expression to be broadcasted across those eintups before the assignment.  For
example:

```
# ary is broadcasted across dup before assignment
outer[batch,dup] = ary[batch]
```

Because all eintups are named, the order of eintups makes no difference until
the final assignment.  For example, the following are all legal and produce the
same result:

```
result[batch,row,col] = mat1[batch,row,inner] * mat2[inner,col,batch]
result[batch,row,col] = mat1[inner,batch,row] * mat2[col,inner,batch]
```

Eintups and underlying tensors are transposed as necessary by the system, but
the user need not worry about that.

Some constructs are provided for convenience.

`RANGE[tup,coord]` is the multi-dimensional version of `tf.range`.  For
example, where `tf.range(10)` produces an array `ary[i] = i`, the expression:

`RANGE[tup,coord]` is logically equivalent to the pseudo-code `RANGE[tup,i] =
tup[i]` (although this is not a legal construct in the Eintup language).
`coord` must be a rank-1 eintup with dimension equal to the rank of `tup`.

`RANDOM(<lo>, <hi>, <dtype>)` produces random numbers in the given range.
Importantly, however, it is a virtual tensor which has different broadcasting
rules.  For instance:






